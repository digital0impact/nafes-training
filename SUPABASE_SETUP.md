# Ø¯Ù„ÙŠÙ„ Ø±Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Supabase

## Ù…Ø§ Ù‡Ùˆ SupabaseØŸ

Supabase Ù‡Ùˆ Ø¨Ø¯ÙŠÙ„ Ù…ÙØªÙˆØ­ Ø§Ù„Ù…ØµØ¯Ø± Ù„Ù€ FirebaseØŒ ÙŠÙˆÙØ±:
- âœ… Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª PostgreSQL Ù…Ø¬Ø§Ù†ÙŠØ© (500MB)
- âœ… ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø¯Ø§Ø±Ø© Ø³Ù‡Ù„Ø©
- âœ… SSL/TLS ØªÙ„Ù‚Ø§Ø¦ÙŠ
- âœ… Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ
- âœ… Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¥Ù†ØªØ§Ø¬

---

## Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¹Ù„Ù‰ Supabase

### 1.1 Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Supabase

1. Ø§Ø°Ù‡Ø¨ÙŠ Ø¥Ù„Ù‰: https://supabase.com
2. Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ **"Start your project"** Ø£Ùˆ **"Sign up"**
3. Ø³Ø¬Ù„ÙŠ Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ GitHub (Ù…ÙˆØµÙ‰ Ø¨Ù‡) Ø£Ùˆ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ

### 1.2 Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯

1. Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ø¶ØºØ·ÙŠ Ø¹Ù„Ù‰ **"New Project"**
2. Ø§Ù…Ù„Ø¦ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
   - **Name**: `nafes-training` (Ø£Ùˆ Ø£ÙŠ Ø§Ø³Ù… ØªÙØ¶Ù„ÙŠÙ†Ù‡)
   - **Database Password**: Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ© ÙˆØ§Ø­ÙØ¸ÙŠÙ‡Ø§
   - **Region**: Ø§Ø®ØªØ± Ø£Ù‚Ø±Ø¨ Ù…Ù†Ø·Ù‚Ø© (Ù…Ø«Ù„Ø§Ù‹: `Southeast Asia (Singapore)`)
3. Ø§Ø¶ØºØ·ÙŠ **"Create new project"**
4. Ø§Ù†ØªØ¸Ø±ÙŠ Ø­ØªÙ‰ ÙŠÙƒØªÙ…Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (2-3 Ø¯Ù‚Ø§Ø¦Ù‚)

---

## Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„

### 2.1 Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

1. ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… SupabaseØŒ Ø§Ø°Ù‡Ø¨ÙŠ Ø¥Ù„Ù‰ **Settings** (Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)
2. Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø§Ø®ØªØ± **Database**
3. Ø§Ù†ØªÙ‚Ù„ÙŠ Ø¥Ù„Ù‰ Ù‚Ø³Ù… **Connection string**

### 2.2 Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„

Ø³ØªØ¬Ø¯ÙŠÙ† Ø¹Ø¯Ø© Ø®ÙŠØ§Ø±Ø§ØªØŒ Ø§Ø®ØªØ± **"URI"**:

```
postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
```

**Ù…Ø«Ø§Ù„:**
```
postgresql://postgres:MyPassword123@db.abcdefghijklmnop.supabase.co:5432/postgres
```

**Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©:** Ø§Ø³ØªØ¨Ø¯Ù„ÙŠ `[YOUR-PASSWORD]` Ø¨ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØªÙŠ Ø§Ø®ØªØ±ØªÙ‡Ø§ Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.

---

## Ø§Ù„Ø®Ø·ÙˆØ© 3: ØªØ­Ø¯ÙŠØ« Prisma Schema

### 3.1 ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù schema.prisma

Ø§ÙØªØ­ÙŠ Ù…Ù„Ù `prisma/schema.prisma` ÙˆØºÙŠØ±ÙŠ:

```prisma
datasource db {
  provider = "postgresql"  // Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† "sqlite"
  url      = env("DATABASE_URL")
}
```

### 3.2 ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù .env

Ø£Ù†Ø´Ø¦ÙŠ Ø£Ùˆ Ø­Ø¯Ù‘Ø«ÙŠ Ù…Ù„Ù `.env` ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:

```env
# Ø±Ø§Ø¨Ø· Supabase
DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@db.PROJECT_REF.supabase.co:5432/postgres?pgbouncer=true&connection_limit=1"

# Ø£Ùˆ Ø¨Ø¯ÙˆÙ† pgbouncer (Ù„Ù„ØªØ·ÙˆÙŠØ±)
# DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@db.PROJECT_REF.supabase.co:5432/postgres"

# NextAuth
NEXTAUTH_SECRET="your-secret-key-here"
NEXTAUTH_URL="http://localhost:3000"
```

**Ø§Ø³ØªØ¨Ø¯Ù„ÙŠ:**
- `YOUR_PASSWORD`: ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- `PROJECT_REF`: Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† Supabase (Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„)

---

## Ø§Ù„Ø®Ø·ÙˆØ© 4: ØªØ·Ø¨ÙŠÙ‚ Migrations Ø¹Ù„Ù‰ Supabase

### 4.1 ØªÙˆÙ„ÙŠØ¯ Prisma Client

```bash
npx prisma generate
```

### 4.2 ØªØ·Ø¨ÙŠÙ‚ Migrations

```bash
npx prisma migrate deploy
```

Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø± Ø³ÙŠÙ†Ø´Ø¦ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Supabase.

**Ù…Ù„Ø§Ø­Ø¸Ø©:** Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø®Ø·Ø£ØŒ Ø¬Ø±Ø¨ÙŠ:

```bash
# Ø­Ø°Ù migrations Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
# Ø«Ù… Ø¥Ù†Ø´Ø§Ø¡ migration Ø¬Ø¯ÙŠØ¯
npx prisma migrate dev --name init
```

---

## Ø§Ù„Ø®Ø·ÙˆØ© 5: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„

### 5.1 ÙØªØ­ Prisma Studio

```bash
npx prisma studio
```

ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙØªØ­ Prisma Studio ÙˆÙŠØ¹Ø±Ø¶ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Supabase.

### 5.2 Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Supabase Dashboard

1. Ø§Ø°Ù‡Ø¨ÙŠ Ø¥Ù„Ù‰ Supabase Dashboard
2. Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©ØŒ Ø§Ø®ØªØ± **Table Editor**
3. ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„:
   - `users`
   - `students`
   - `test_models`
   - `activities`
   - `sessions`
   - `accounts`
   - `verification_tokens`

---

## Ø§Ù„Ø®Ø·ÙˆØ© 6: Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© ÙÙŠ Supabase

### 6.1 ØªÙØ¹ÙŠÙ„ Row Level Security (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

Ù„Ù„Ø£Ù…Ø§Ù†ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙØ¹ÙŠÙ„ Row Level Security:

1. ÙÙŠ Supabase DashboardØŒ Ø§Ø°Ù‡Ø¨ÙŠ Ø¥Ù„Ù‰ **Authentication** > **Policies**
2. Ø£Ø¶ÙŠÙÙŠ Ø³ÙŠØ§Ø³Ø§Øª Ø£Ù…Ø§Ù† Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©

**Ù…Ù„Ø§Ø­Ø¸Ø©:** Ù„Ù„ØªØ·ÙˆÙŠØ±ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ±ÙƒÙ‡Ø§ Ù…Ø¹Ø·Ù„Ø© Ù…Ø¤Ù‚ØªØ§Ù‹.

### 6.2 Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„

ÙÙŠ Supabase Dashboard > Settings > Database:

- **Connection Pooling**: Ù…ÙˆØµÙ‰ Ø¨Ù‡ Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- **SSL Mode**: `require` (Ø§ÙØªØ±Ø§Ø¶ÙŠ)

---

## Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ù…Ø´ÙƒÙ„Ø©: "Connection refused" Ø£Ùˆ "Timeout"

**Ø§Ù„Ø­Ù„:**
1. ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„ (DATABASE_URL)
2. ØªØ£ÙƒØ¯ÙŠ Ù…Ù† Ø£Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØµØ­ÙŠØ­Ø©
3. ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† Ø¬Ø¯Ø§Ø± Ø§Ù„Ø­Ù…Ø§ÙŠØ© (Firewall) - Supabase ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† Ø£ÙŠ Ù…ÙƒØ§Ù† Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹

### Ù…Ø´ÙƒÙ„Ø©: "password authentication failed"

**Ø§Ù„Ø­Ù„:**
1. ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙÙŠ DATABASE_URL
2. ØªØ£ÙƒØ¯ÙŠ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØµØ­ÙŠØ­Ø© Ù…Ù† Supabase

### Ù…Ø´ÙƒÙ„Ø©: "relation does not exist"

**Ø§Ù„Ø­Ù„:**
```bash
# ØªØ£ÙƒØ¯ÙŠ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ migrations
npx prisma migrate deploy

# Ø£Ùˆ Ø£Ø¹Ø¯ÙŠ Ø¥Ù†Ø´Ø§Ø¡ migrations
npx prisma migrate reset
npx prisma migrate dev
```

### Ù…Ø´ÙƒÙ„Ø©: "too many connections"

**Ø§Ù„Ø­Ù„:**
Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Connection Pooling ÙÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„:
```
DATABASE_URL="postgresql://postgres:PASSWORD@db.REF.supabase.co:5432/postgres?pgbouncer=true&connection_limit=1"
```

---

## Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬

### 1. ØªØ­Ø¯ÙŠØ« NEXTAUTH_URL

ÙÙŠ Ù…Ù„Ù `.env` Ù„Ù„Ø¥Ù†ØªØ§Ø¬:

```env
NEXTAUTH_URL="https://your-app.vercel.app"
```

### 2. Ø¥Ø¶Ø§ÙØ© Environment Variables ÙÙŠ Vercel

Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Vercel:

1. Ø§Ø°Ù‡Ø¨ÙŠ Ø¥Ù„Ù‰ Project Settings > Environment Variables
2. Ø£Ø¶ÙŠÙÙŠ:
   - `DATABASE_URL`: Ø±Ø§Ø¨Ø· Supabase
   - `NEXTAUTH_SECRET`: Ù…ÙØªØ§Ø­ Ø³Ø±ÙŠ Ù‚ÙˆÙŠ
   - `NEXTAUTH_URL`: Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### 3. Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ

Supabase ÙŠÙˆÙØ± Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ†Ùƒ:
1. Ø§Ø°Ù‡Ø¨ÙŠ Ø¥Ù„Ù‰ Settings > Database > Backups
2. Ù‚ÙˆÙ…ÙŠ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©

---

## Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

### 1. Ø£Ù…Ø§Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±

- Ù„Ø§ ØªØ´Ø§Ø±ÙƒÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„ (DATABASE_URL) Ø¹Ù„Ù†Ø§Ù‹
- Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Environment Variables Ø¯Ø§Ø¦Ù…Ø§Ù‹
- Ù„Ø§ ØªØ±ÙØ¹ÙŠ Ù…Ù„Ù `.env` Ø¹Ù„Ù‰ GitHub

### 2. Ø§Ù„Ø£Ø¯Ø§Ø¡

- Ø§Ø³ØªØ®Ø¯Ù…ÙŠ Connection Pooling Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- Ø±Ø§Ù‚Ø¨ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Supabase Dashboard
- ÙÙƒØ±ÙŠ ÙÙŠ Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø¹Ù†Ø¯ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ (500MB)

### 3. Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø­Ù„ÙŠ

ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Supabase Ù„Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ø£Ùˆ:
- **Ø§Ù„ØªØ·ÙˆÙŠØ±**: SQLite Ù…Ø­Ù„ÙŠ
- **Ø§Ù„Ø¥Ù†ØªØ§Ø¬**: Supabase

ØºÙŠÙ‘Ø±ÙŠ `DATABASE_URL` Ø­Ø³Ø¨ Ø§Ù„Ø¨ÙŠØ¦Ø©.

---

## Ø®Ø·ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø© (Ù…Ù„Ø®Øµ)

```bash
# 1. Ø£Ù†Ø´Ø¦ÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø¹Ù„Ù‰ Supabase.com
# 2. Ø§Ù†Ø³Ø®ÙŠ Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† Settings > Database

# 3. Ø­Ø¯Ù‘Ø«ÙŠ prisma/schema.prisma
#    provider = "postgresql"

# 4. Ø­Ø¯Ù‘Ø«ÙŠ .env
#    DATABASE_URL="postgresql://..."

# 5. Ø´ØºÙ„ÙŠ Ø§Ù„Ø£ÙˆØ§Ù…Ø±
npx prisma generate
npx prisma migrate deploy

# 6. ØªØ­Ù‚Ù‚ÙŠ
npx prisma studio
```

---

## Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©

- ğŸ“š [ÙˆØ«Ø§Ø¦Ù‚ Supabase](https://supabase.com/docs)
- ğŸ”— [Supabase Dashboard](https://app.supabase.com)
- ğŸ“– [Prisma + PostgreSQL](https://www.prisma.io/docs/concepts/database-connectors/postgresql)

---

**ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«:** ÙŠÙ†Ø§ÙŠØ± 2025







